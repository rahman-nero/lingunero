# Структура

Проект состоит из:

1. backend - основная бизнес логика (весь код)
2. llm - ИИ сервис с моделью для общения (чат бот)

# Первоначальная настройка и запуск проекта

В данном разделе будем описывать процесс подготовки проекта к запуску.

Запуск не сложен, но требует некоторых содействий от вас.

Шаги которые нужно выполнить:

* Настроить .env-файл для докера
* Настроить .env-файл для проекта
* Запуск проекта и выполнение команд

### Настройка .env-файл для докера

Выполняем команду:

```shell
cp .env.example .env
```

В проекте доступен ИИ чат-бот (аналог ChatGPT). По умолчанию он не будет работать, для включения - нужно
раскоментрировать переменную `LLM_URL` из файла `.env`.
Модель по-умолчанию скачивается Meta-LLM, однако можно туда свою указать, только она должна быть формата `.gguf`

На этом закончили настройку окружения для докера.

### Настроить .env-файл для проекта

Выполняем команды:

```shell
cd backend
cp .env.example .env

cd ../

cd llm
cp .env.example .env
```

В случае если вы указали кастомную данные для баз данных, то меняем в выше файлах.

---

### Запуск проекта

Чтобы выполнить последующие действия, нам нужно запустить контейнеры:

```shell
make up
```

Конечные команды:

```shell
make composer-prod-install # Установка composer-зависимостей
make key-generate # Генерация ключа
make build-production # Установка зависимостей front-end и билд
make laravel-migrate # Запуск миграции
make storage-link # Линковка storage в public
```

Дальше заходим на `localhost` и наслаждаемся сайтом :)

---

### Бонус

У меня в папке `backups`, хранятся слова которые я добавил в свою бд, во время изучения английского.
Если вы хотите запустить приложения с этими данными, то вам нужно импортировать этот файл в бд.

Но, сперва вам нужно удалить все таблицы чтобы импорт сработал, коротко, вот команды

```shell
make drop-database
docker compose exec -T mysql mysql -uroot -proot app < ./backups/<<тут пишем имя backup-файла>>
```

Заметь, чтобы это работало нужны запушенные контейнеры докера.

**Логин и пароль для входа на сайт:**

Первый пользователь:

```
email: admin@gmail.com
password: 1234567890
```

Второй пользователь:

``` 
email: admin2@gmail.com
password: 1234567890
```

---

### TODO

- [ ] Подправить мобильный дизайн. Меню подправить и сам чат.
- [ ] Скрол вниз при открытии чата
- [ ] Удаление чата
- [ ] Кэширование и подтягивания кэша с базы при ответе LLM. Свой кэш для каждого чата
- [ ] Доработать создание чата. Добавить иконку создания чата
- [ ] Возможность переименования чата
- [ ] Возможность просмотра когда сообщение было отправлено
- [ ] Добавить message_sent_at и подправить контроллер
- [x] Доработать докер для более удобного развертывания и дебагинга
- [x] Доработать документацию текущую по развертыванию
- [ ] Рассмотреть возможность передавать какие-то условия с клиента. Например чтобы отвечал полностью на английском и
  т.д. Можно модалку настроек сделать
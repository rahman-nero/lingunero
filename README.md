### Структура

Проект состоит из:
1. backend - основная бизнес логика (весь код)
2. llm - ИИ сервис с моделью для общения

> Если хочу установить новую библиотеку, мне нужно выполнить `source .venv/bin/activate` в папке llm. Войти в окружение проекта, чтобы пакеты не установились глобально

### Запуск

Запуск не сложен, но требует некоторых содействий от вас. 

Шаги которые нужно сделать:
* Установить composer-зависимости
* Настроить .env-файл
* Установить npm-зависимости
* Запуск миграций
* еще мелкие действия

Чтобы выполнить последующие действия, нам нужно запустить контейнеры:
```
make up
```


**Шаг 1. Установка composer-зависимостей:**

Чтобы установить зависимости выполняем, вот эту команду:
```
make composer-prod-install
```


**Шаг 2. Настроить .env-файл :**

Смотри, у тебя в проекте есть файл `.env.example` - это примерный файл конфига.

Нам теперь нужно переименовать этот файл в `.env`

В этом файле вы должны указать заполнить поле `APP_KEY`, это не делается вручную, для этого есть команда
```
cp .env.example .env
docker compose exec php-cli php artisan key:generate 
```
Также если вы запустили сайт не на **localhost**, а на каком-то домене. (Поумолчанию сайт находится на **localhost:8080**) 
То тогда, меняем параметр `APP_URL` в конфиге, на тот адрес который вы указали.
Мы закончили с настройками **.env-файла**.


**Шаг 3. Установить npm-зависимости**

Для корректной работоспособности сайта, нужно установить зависимости сайта.

Чтобы установить эти зависимости и наладить работоспособность сайта, выполняем эти команды:

```
make build-production
```

**Шаг 4. Запускаем миграций**

Теперь после всех действий нам нужно сделать миграцию базу данных.

Миграция - это когда мы запускаем процесс, который создает таблицы нужные для работы приложения, так что это команда **обязательна**
```
make laravel-migrate
```


**Шаг 5. Мелкие действия**

Команда для создание ссылки на `storage` в папке `public`.

```
docker compose exec php-cli php artisan storage:link 
```

Дальше заходим на `localhost` и наслаждаемся сайтом :)

---
### Бонус

У меня в папке `backups`, хранятся слова которые я добавил в свою бд, во время изучения английского.
Если вы хотите запустить приложения с этими данными, то вам нужно импортировать этот файл в бд.

Но, сперва вам нужно удалить все таблицы чтобы импорт сработал, коротко, вот команды
```
make drop-database
docker compose exec -T mysql mysql -uroot -proot app < ./backups/<<тут пишем имя backup-файла>>
```

Заметь, чтобы это работало нужны запушенные контейнеры докера.


**Логин и пароль для входа на сайт:**

Первый пользователь:
```
email: admin@gmail.com
password: 1234567890
```
Второй пользователь:
``` 
email: admin2@gmail.com
password: 1234567890
```


---
### TODO

- [ ] Подправить мобильный дизайн. Меню подправить и сам чат.
- [ ] Скрол вниз при открытии чата
- [ ] Удаление чата
- [ ] Кэширование и подтягивания кэша с базы при ответе LLM. Свой кэш для каждого чата
- [ ] Доработать создание чата. Добавить иконку создания чата
- [ ] Возможность переименования чата
- [ ] Возможность просмотра когда сообщение было отправлено
- [ ] Добавить message_sent_at и подправить контроллер
- [ ] Доработать докер для более удобного развертывания и дебагинга
- [ ] Доработать документацию текущую по развертыванию
- [ ] Рассмотреть возможность передавать какие-то условия с клиента. Например чтобы отвечал полностью на английском и т.д. Можно модалку сделать